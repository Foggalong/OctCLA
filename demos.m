% This file is part of OctCLA, Copyright (c) 2022 Josh Fogg, released
% under the MIT License. See: https://github.com/Foggalong/OctCLA

% set output formatting
format compact
% format long

addpath(genpath("finance/"))
addpath(genpath("genetics/"))

% set up the problem manually using variables
S = [1, 3, 5, 6, 9]
D = [2, 4, 7, 8]

% % set up the problem manually using variables
% S = [1, 3, 5, 6, 9]
% D = [2, 4, 7, 8]

% mu = [
%     -1.11327183192584;
%     % 0.475131697413812;
%     1.02984130716727;
%     0.318290295128584;
%     -0.701521504081984;
%     1.67776663013588;
%     0.617760631725603;
%     0.870138981023043;
%     1.35470177250246;
%     0.940494662242229;
% ]

mu = [
    -1.11327183192584;
    0.475131697413812;
    1.02984130716727;
    % 0.318290295128584;
    -0.701521504081984;
    1.67776663013588;
    0.617760631725603;
    0.870138981023043;
    1.35470177250246;
    0.940494662242229;
]
lb = zeros(9, 1);
ub = ones(1.0, 9)';
covar = [
   1.00000, 0.00000, 0.50000, 0.50000, 0.00000, 0.50000, 0.50000, 0.50000, 0.25000;
   0.00000, 1.00000, 0.50000, 0.50000, 0.50000, 0.50000, 0.25000, 0.37500, 0.37500;
   0.50000, 0.50000, 1.00000, 0.50000, 0.25000, 0.75000, 0.37500, 0.56200, 0.31200;
   0.50000, 0.50000, 0.50000, 1.00000, 0.25000, 0.75000, 0.37500, 0.56200, 0.31200;
   0.00000, 0.50000, 0.25000, 0.25000, 1.00000, 0.25000, 0.50000, 0.37500, 0.75000;
   0.50000, 0.50000, 0.75000, 0.75000, 0.25000, 1.25000, 0.37500, 0.81200, 0.31200;
   0.50000, 0.25000, 0.37500, 0.37500, 0.50000, 0.37500, 1.00000, 0.68800, 0.75000;
   0.50000, 0.37500, 0.56200, 0.56200, 0.37500, 0.81200, 0.68800, 1.18800, 0.53100;
   0.25000, 0.37500, 0.31200, 0.31200, 0.75000, 0.31200, 0.75000, 0.53100, 1.25000
];

% calculate turning points using OctCLA genetics functions
tic
sols = calculate_turningpoints_gen(mu, covar, lb, ub, S, D, 0)'
toc

